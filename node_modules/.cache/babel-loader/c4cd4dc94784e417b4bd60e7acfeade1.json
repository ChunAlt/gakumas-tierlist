{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Chun\\\\gakumas-tierlist\\\\src\\\\components\\\\TierList.js\";\nimport React from 'react';\nimport SupportCard from './SupportCard';\nimport { supportCardProperties } from '../constants';\nimport Select from 'react-select';\nimport allCards from '../cards';\nimport FreeIcon from '../icons/utx_ico_obtain_10.png';\nimport SenseIcon from '../icons/utx_ico_obtain_11.png';\nimport LogiclIcon from '../icons/utx_ico_obtain_12.png';\nimport AnomalyIcon from '../icons/utx_ico_obtain_13.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ordinal = [\"1st\", \"2nd\", \"3rd\", \"4th\", \"5th\", \"6th\", \"7th\"];\nconst plan_names = [\"Free\", \"Sense\", \"Logic\", \"Anomaly\"];\nconst type_to_icon = [FreeIcon, SenseIcon, LogiclIcon, AnomalyIcon];\n\nclass TierList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dropdownSelections: [\"none\", \"none\", \"none\"]\n    };\n    this.onDropdown1Changed = this.onDropdown1Changed.bind(this);\n    this.onDropdown2Changed = this.onDropdown2Changed.bind(this);\n    this.onDropdown3Changed = this.onDropdown3Changed.bind(this);\n    this.onToggleResults = this.onToggleResults.bind(this);\n    this.onToggleResults2 = this.onToggleResults2.bind(this);\n  } //lmao\n\n\n  onDropdown1Changed(newValue) {\n    let newSelections = this.state.dropdownSelections.slice();\n    newSelections[0] = newValue.value;\n    this.setState({\n      dropdownSelections: newSelections\n    });\n  }\n\n  onDropdown2Changed(newValue) {\n    let newSelections = this.state.dropdownSelections.slice();\n    newSelections[1] = newValue.value;\n    this.setState({\n      dropdownSelections: newSelections\n    });\n  }\n\n  onDropdown3Changed(newValue) {\n    let newSelections = this.state.dropdownSelections.slice();\n    newSelections[2] = newValue.value;\n    this.setState({\n      dropdownSelections: newSelections\n    });\n  }\n\n  onToggleResults(event) {\n    this.setState({\n      show: !this.state.show\n    });\n  }\n\n  onToggleResults2(event) {\n    this.setState({\n      show: !this.state.show\n    });\n  }\n\n  render() {\n    let cards = this.props.cards;\n    let selectedNames = this.props.selectedCards.map(card => card.char_name);\n    let processedCardsAll = processCards(allCards, this.props.weights, this.props.selectedCards);\n\n    if (this.props.weights.type > -1) {\n      cards = cards.filter(e => e.type === this.props.weights.type);\n    }\n\n    let processedCards = processCards(cards, this.props.weights, this.props.selectedCards);\n\n    if (processedCards.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tier-list\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 20\n      }, this);\n    }\n\n    let rows = [[]];\n    let current_row = 0;\n    let step = (processedCards[0].score - processedCards[processedCards.length - 1].score) / 7;\n    let boundary = processedCards[0].score - step;\n\n    for (let i = 0; i < processedCards.length; i++) {\n      while (processedCards[i].score < boundary - 1) {\n        rows.push([]);\n        current_row++;\n        boundary -= step;\n      }\n\n      rows[current_row].push( /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"support-card\",\n        children: [/*#__PURE__*/_jsxDEV(SupportCard, {\n          id: processedCards[i].id,\n          lb: processedCards[i].lb,\n          score: processedCards[i].score,\n          info: processedCards[i].info,\n          charName: processedCards[i].char_name,\n          selected: selectedNames,\n          card: cards.find(c => c.id === processedCards[i].id && c.limit_break === processedCards[i].lb),\n          onClick: () => this.props.cardSelected(cards.find(c => c.id === processedCards[i].id && c.limit_break === processedCards[i].lb)),\n          stats: this.state.dropdownSelections\n        }, processedCards[i].id + \"LB\" + processedCards[i].lb, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"plan-icon\",\n          name: \"plan icon\",\n          src: type_to_icon[processedCards[i].info.plan],\n          title: processedCards[i].info.plan,\n          alt: \"card type\",\n          onClick: () => this.props.cardSelected(cards.find(c => c.id === processedCards[i].id && c.limit_break === processedCards[i].lb))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)]\n      }, processedCards[i].id + \"LB\" + processedCards[i].lb, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this));\n    }\n\n    let resultValues = processScores(processedCardsAll, this.props.weights, this.props.selectedCards);\n    let tiers = [];\n\n    for (let i = 0; i < 7; i++) {\n      tiers.push( /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tier\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tier-letter\",\n          children: tierNames[i]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tier-images\",\n          children: rows[i]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this)]\n      }, tierNames[i], true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this));\n    }\n\n    let count = this.props.selectedCards.filter(c => c.type == this.props.weights.type).length;\n    let dropdownOptions = [{\n      value: \"none\",\n      label: \"None\"\n    }];\n    let properties = Object.keys(supportCardProperties).sort();\n\n    for (let i = 0; i < properties.length; i++) {\n      dropdownOptions.push({\n        value: properties[i],\n        label: supportCardProperties[properties[i]].friendly_name\n      });\n    }\n\n    const resultsTable = [[resultValues[0].startingStats[0], resultValues[0].startingStats[1], resultValues[0].startingStats[2], resultValues[0].startingStats[0] + resultValues[0].startingStats[1] + resultValues[0].startingStats[2]], [resultValues[0].startingMult[0], resultValues[0].startingMult[1], resultValues[0].startingMult[2], resultValues[0].startingMult[0] + resultValues[0].startingMult[1] + resultValues[0].startingMult[2]], [Math.round(resultValues[0].finalScore[0]), Math.round(resultValues[0].finalScore[1]), Math.round(resultValues[0].finalScore[2]), Math.round(resultValues[0].finalScore[0]) + Math.round(resultValues[0].finalScore[1]) + Math.round(resultValues[0].finalScore[2])]];\n    const rowLabels = [\"Starting  Stats\", \"Stats Multiplier\", \"Predicted Final Stats\"];\n    let results = [];\n    /*\r\n    const resultsTable2 = [\r\n        [resultValues[0].startingStats[0], resultValues[0].startingStats[1], resultValues[0].startingStats[2], resultValues[0].startingStats[0] + resultValues[0].startingStats[1] + resultValues[0].startingStats[2]],\r\n        [resultValues[0].startingMult[0], resultValues[0].startingMult[1], resultValues[0].startingMult[2], resultValues[0].startingMult[0] + resultValues[0].startingMult[1] + resultValues[0].startingMult[2]],\r\n        [Math.round(resultValues[0].finalScore[0]), Math.round(resultValues[0].finalScore[1]), Math.round(resultValues[0].finalScore[2]), Math.round(resultValues[0].finalScore[0]) + Math.round(resultValues[0].finalScore[1]) + Math.round(resultValues[0].finalScore[2])],\r\n    ];\r\n      const rowLabels2 = [\"Starting  Stats\", \"Stats Multiplier\", \"Predicted Final Stats\"];\r\n      let results2 = [];\r\n    */\n\n    let statPoints = Math.round((resultValues[0].finalScore[0] + resultValues[0].finalScore[1] + resultValues[0].finalScore[2]) * 2.3 - 0.5);\n    let requirements = [18000, 16000, 14500, 13000, 11500];\n    let examReq = [0, 0, 0, 0, 0];\n\n    for (let i = 0; i < requirements.length; i++) {\n      requirements[i] -= statPoints + 1700;\n\n      if (requirements[i] < 1500) {\n        examReq[i] = requirements[i] * (100 / 30);\n      } else if (requirements[i] < 2250) {\n        requirements[i] -= 1500;\n        examReq[i] = 5000 + requirements[i] * (100 / 15);\n      } else if (requirements[i] < 3050) {\n        requirements[i] -= 1500 + 750;\n        examReq[i] = 5000 + 5000 + requirements[i] * (100 / 8);\n      } else if (requirements[i] < 3450) {\n        requirements[i] -= -1500 + 750 + 800;\n        examReq[i] = 5000 + 5000 + 10000 + requirements[i] * (100 / 4);\n      } else if (requirements[i] < 3650) {\n        requirements[i] -= 1500 + 750 + 800 + 400;\n        examReq[i] = 5000 + 5000 + 10000 + 10000 + requirements[i] * (100 / 2);\n      } else {\n        requirements[i] -= 1500 + 750 + 800 + 400 + 200;\n        examReq[i] = 5000 + 5000 + 10000 + 10000 + 10000 + requirements[i] * (100 / 1);\n      }\n    }\n\n    ;\n    results.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"weights\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"weight-row\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"results-toggle\",\n          type: \"button\",\n          onClick: this.onToggleResults,\n          children: this.state.show ? \"Hide Results\" : \"Show Results\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }, this), this.state.show && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"number-table-container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"number-table\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Vocal\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 201,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Dance\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Visual\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: resultsTable.map((row, rowIndex) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: rowLabels[rowIndex]\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 210,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 210,\n                    columnNumber: 49\n                  }, this), row.map((num, colIndex) => /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: rowIndex === 1 ? `${num}%` : num\n                  }, colIndex, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 53\n                  }, this))]\n                }, rowIndex, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 45\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          nameClass: \"section-text\",\n          children: [\"Estimated exam score needed for grade: SS+: \", examReq[0], \", SS: \", examReq[1], \", S+: \", examReq[2], \", S: \", examReq[3], \", A+: \", examReq[4]]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true)]\n    }, resultValues[0].finalScore[0], true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tier-list\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"section-explanation\",\n        children: results\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"selectors\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"selectLabel\",\n          children: \"Show Stats:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          className: \"select\",\n          options: dropdownOptions,\n          onChange: this.onDropdown1Changed,\n          defaultValue: {\n            value: \"none\",\n            label: \"None\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          className: \"select\",\n          options: dropdownOptions,\n          onChange: this.onDropdown2Changed,\n          defaultValue: {\n            value: \"none\",\n            label: \"None\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          className: \"select\",\n          options: dropdownOptions,\n          onChange: this.onDropdown3Changed,\n          defaultValue: {\n            value: \"none\",\n            label: \"None\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"label\",\n        children: [\"Cards are ordered within tiers, but tiers are relatively arbitrary since I just used the Uma setting. \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 119\n        }, this), \"Asari cards ruin literally everything I've done because I forgot they existed, and thus, will not be implemented for now.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 17\n      }, this), tiers]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst tierNames = ['S', 'A', 'B', 'C', 'D', 'E', 'F'];\n\nfunction processCards(cards, weights, selectedCards) {\n  let processedCards = [];\n  selectedCards = selectedCards.slice(); // Calculate some stuff here so we don't have to do it a million times later\n\n  for (let card = 0; card < selectedCards.length; card++) {\n    let selectedCard = selectedCards[card];\n    selectedCard.index = card;\n  }\n\n  for (let i = 0; i < cards.length; i++) {\n    let info = {};\n    let card = JSON.parse(JSON.stringify(cards[i]));\n    card.index = 6; // Add starting stats and stats from events\n\n    let score = 0;\n    let statGains = card.start_b;\n    info.type = card.type;\n    info.plan = card.plan;\n    info.start_b = card.start_b;\n    info.pb = card.pb;\n    info.spRate = card.sp_r;\n    info.spp = card.spp;\n\n    if (card.type === 0) {\n      statGains += card.pb * weights.vocalLessons[0];\n    } else if (card.type === 1) {\n      statGains += card.pb * weights.danceLessons[0];\n    } else {\n      statGains += card.pb * weights.visualLessons[0];\n    }\n\n    if (card.type === 0) {\n      statGains += card.lb * weights.vocalLessons[1];\n    } else if (card.type === 1) {\n      statGains += card.lb * weights.danceLessons[1];\n    } else {\n      statGains += card.lb * weights.visualLessons[1];\n    }\n\n    if (card.type === 0) {\n      statGains += card.sp_lb * weights.vocalLessons[2];\n    } else if (card.type === 1) {\n      statGains += card.sp_lb * weights.danceLessons[2];\n    } else {\n      statGains += card.sp_lb * weights.visualLessons[2];\n    }\n\n    if (card.type === 0) {\n      statGains += card.n_lb * weights.vocalLessons[3];\n    } else if (card.type === 1) {\n      statGains += card.n_lb * weights.danceLessons[3];\n    } else {\n      statGains += card.n_lb * weights.visualLessons[3];\n    }\n\n    statGains += card.rest_b * weights.rest;\n    statGains += card.gb * weights.gift;\n    statGains += card.db * weights.date;\n    statGains += card.sb * weights.shop;\n    statGains += card.cb * weights.classroom;\n    statGains += card.pdb * weights.drink;\n    statGains += card.mb;\n    statGains += card.ub * weights.upgrade.reduce((total, current) => total + current, 0);\n    statGains += card.m_ub * weights.upgrade[1];\n    statGains += card.a_cb * weights.cardAcq[0];\n    statGains += card.m_cb * weights.cardAcq[1];\n    statGains += card.con_cb * weights.cardAcq[2];\n    statGains += card.remove_b * weights.removal; // Convert stat gains to score\n\n    score += statGains;\n    processedCards.push({\n      id: card.id,\n      lb: card.limit_break,\n      score: score,\n      info: info,\n      char_name: card.char_name\n    });\n  }\n\n  processedCards.sort((a, b) => b.score - a.score);\n  return processedCards;\n}\n\nfunction processScores(processedCards, weights, selectedCards) {\n  selectedCards = selectedCards.slice();\n  let startingStats = [0, 0, 0];\n  startingStats = startingStats.map((stat, index) => stat + weights.idolStats[index] + weights.memStats[index]);\n  let idolMemMult = [0, 0, 0];\n  idolMemMult = idolMemMult.map((stat, index) => stat + weights.idolMult[index] + weights.memMult[index]);\n  let startingMult = idolMemMult;\n  let cardBonus = [0, 0, 0];\n  let cardStartBonus = [0, 0, 0];\n  let spRate = weights.spRate;\n\n  for (let card = 0; card < selectedCards.length; card++) {\n    let cardID = selectedCards[card].id;\n    let cardLB = selectedCards[card].limit_break;\n    let type = selectedCards[card].type;\n    let matchingCards = processedCards.find(processedCards => processedCards.id === cardID && processedCards.lb === cardLB);\n    startingStats[type] += matchingCards.info.start_b;\n    startingMult[type] += matchingCards.info.pb * 100;\n    spRate += matchingCards.info.spRate;\n    cardBonus[type] += matchingCards.score;\n    cardStartBonus[type] += matchingCards.info.start_b;\n  }\n\n  let examBonus = 50;\n  let lessonGain = [(1 + idolMemMult[0] / 100) * weights.vocalLessons[0], (1 + idolMemMult[1] / 100) * weights.danceLessons[0], (1 + idolMemMult[2] / 100) * weights.visualLessons[0]];\n  let finalScore = startingStats.map((stat, index) => stat + cardBonus[index] + lessonGain[index] + weights.classroomStats[index] + examBonus - cardStartBonus[index]);\n  let roundedScore = Object.fromEntries(Object.entries(finalScore).map(_ref => {\n    let [key, value] = _ref;\n    return [key, Math.min(value, weights.statCap)];\n  }));\n  let results = [{\n    startingStats: startingStats,\n    startingMult: startingMult,\n    spRate: spRate,\n    cardBonus: cardBonus,\n    finalScore: roundedScore\n  }];\n  return results;\n}\n\nexport default TierList;","map":{"version":3,"sources":["C:/Users/Chun/gakumas-tierlist/src/components/TierList.js"],"names":["React","SupportCard","supportCardProperties","Select","allCards","FreeIcon","SenseIcon","LogiclIcon","AnomalyIcon","ordinal","plan_names","type_to_icon","TierList","Component","constructor","props","state","dropdownSelections","onDropdown1Changed","bind","onDropdown2Changed","onDropdown3Changed","onToggleResults","onToggleResults2","newValue","newSelections","slice","value","setState","event","show","render","cards","selectedNames","selectedCards","map","card","char_name","processedCardsAll","processCards","weights","type","filter","e","processedCards","length","rows","current_row","step","score","boundary","i","push","id","lb","info","find","c","limit_break","cardSelected","plan","resultValues","processScores","tiers","tierNames","count","dropdownOptions","label","properties","Object","keys","sort","friendly_name","resultsTable","startingStats","startingMult","Math","round","finalScore","rowLabels","results","statPoints","requirements","examReq","row","rowIndex","num","colIndex","selectedCard","index","JSON","parse","stringify","statGains","start_b","pb","spRate","sp_r","spp","vocalLessons","danceLessons","visualLessons","sp_lb","n_lb","rest_b","rest","gb","gift","db","date","sb","shop","cb","classroom","pdb","drink","mb","ub","upgrade","reduce","total","current","m_ub","a_cb","cardAcq","m_cb","con_cb","remove_b","removal","a","b","stat","idolStats","memStats","idolMemMult","idolMult","memMult","cardBonus","cardStartBonus","cardID","cardLB","matchingCards","examBonus","lessonGain","classroomStats","roundedScore","fromEntries","entries","key","min","statCap"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport SupportCard from './SupportCard';\r\nimport { supportCardProperties } from '../constants';\r\nimport Select from 'react-select';\r\nimport allCards from '../cards';\r\nimport FreeIcon from '../icons/utx_ico_obtain_10.png';\r\nimport SenseIcon from '../icons/utx_ico_obtain_11.png';\r\nimport LogiclIcon from '../icons/utx_ico_obtain_12.png';\r\nimport AnomalyIcon from '../icons/utx_ico_obtain_13.png';\r\n\r\nconst ordinal = [\"1st\", \"2nd\", \"3rd\", \"4th\", \"5th\", \"6th\", \"7th\"];\r\nconst plan_names = [\"Free\", \"Sense\", \"Logic\", \"Anomaly\"];\r\n\r\nconst type_to_icon = [\r\n    FreeIcon,\r\n    SenseIcon,\r\n    LogiclIcon,\r\n    AnomalyIcon,\r\n]\r\n\r\nclass TierList extends React.Component {\r\n    constructor (props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            dropdownSelections: [\"none\",\"none\",\"none\"]\r\n        }\r\n\r\n        this.onDropdown1Changed = this.onDropdown1Changed.bind(this);\r\n        this.onDropdown2Changed = this.onDropdown2Changed.bind(this);\r\n        this.onDropdown3Changed = this.onDropdown3Changed.bind(this);\r\n        this.onToggleResults = this.onToggleResults.bind(this);\r\n        this.onToggleResults2 = this.onToggleResults2.bind(this);\r\n    }\r\n\r\n    //lmao\r\n    onDropdown1Changed(newValue) {\r\n        let newSelections = this.state.dropdownSelections.slice();\r\n        newSelections[0] = newValue.value;\r\n        this.setState({dropdownSelections:newSelections});\r\n    }\r\n    onDropdown2Changed(newValue) {\r\n        let newSelections = this.state.dropdownSelections.slice();\r\n        newSelections[1] = newValue.value;\r\n        this.setState({dropdownSelections:newSelections});\r\n    }\r\n    onDropdown3Changed(newValue) {\r\n        let newSelections = this.state.dropdownSelections.slice();\r\n        newSelections[2] = newValue.value;\r\n        this.setState({dropdownSelections:newSelections});\r\n    }\r\n\r\n    onToggleResults(event) {\r\n        this.setState({ show: !this.state.show });\r\n    }\r\n\r\n    onToggleResults2(event) {\r\n        this.setState({ show: !this.state.show });\r\n    }\r\n\r\n    render() {\r\n        let cards = this.props.cards;\r\n        let selectedNames = this.props.selectedCards.map(card => card.char_name);\r\n        let processedCardsAll = processCards(allCards, this.props.weights, this.props.selectedCards);\r\n\r\n        if (this.props.weights.type > -1) {\r\n            cards = cards.filter(e => e.type === this.props.weights.type);\r\n        }\r\n\r\n        let processedCards = processCards(cards, this.props.weights, this.props.selectedCards);\r\n\r\n        if (processedCards.length === 0) {\r\n            return <div className=\"tier-list\"></div>;\r\n        }\r\n\r\n        let rows = [[]];\r\n        let current_row = 0;\r\n        let step = (processedCards[0].score - processedCards[processedCards.length - 1].score) / 7;\r\n        let boundary = processedCards[0].score - step;\r\n\r\n        for (let i = 0; i < processedCards.length; i++) {\r\n            while (processedCards[i].score < boundary - 1) {\r\n                rows.push([]);\r\n                current_row++;\r\n                boundary -= step;\r\n            }\r\n\r\n            rows[current_row].push((\r\n                <div key = { processedCards[i].id + \"LB\" + processedCards[i].lb } className=\"support-card\">\r\n\r\n                    <SupportCard\r\n                        id={processedCards[i].id}\r\n                        lb={processedCards[i].lb}\r\n                        score={processedCards[i].score}\r\n                        key={processedCards[i].id + \"LB\" + processedCards[i].lb}\r\n                        info={processedCards[i].info}\r\n                        charName={processedCards[i].char_name}\r\n                        selected={selectedNames}\r\n                        card={cards.find((c) => c.id === processedCards[i].id && c.limit_break === processedCards[i].lb)}\r\n                        onClick={() => this.props.cardSelected(cards.find((c) => c.id === processedCards[i].id && c.limit_break === processedCards[i].lb))}\r\n                        stats={this.state.dropdownSelections}\r\n                    />\r\n                    <img\r\n                        className=\"plan-icon\"\r\n                        name=\"plan icon\"\r\n                        src={type_to_icon[processedCards[i].info.plan]}\r\n                        title={processedCards[i].info.plan}\r\n                        alt=\"card type\"\r\n                        onClick={() => this.props.cardSelected(cards.find((c) => c.id === processedCards[i].id && c.limit_break === processedCards[i].lb))}\r\n                    />\r\n                </div>\r\n            ));\r\n        }\r\n\r\n\r\n        let resultValues = processScores(processedCardsAll, this.props.weights, this.props.selectedCards);\r\n\r\n        let tiers = [];\r\n\r\n        for (let i = 0; i < 7; i++) {\r\n            tiers.push(\r\n                <div className=\"tier\" key={tierNames[i]}>\r\n                    <div className=\"tier-letter\">{tierNames[i]}</div>\r\n                    <div className=\"tier-images\">{rows[i]}</div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        let count = this.props.selectedCards.filter((c) => c.type == this.props.weights.type).length;\r\n        let dropdownOptions = [{ value: \"none\", label: \"None\" }];\r\n        let properties = Object.keys(supportCardProperties).sort();\r\n        for (let i = 0; i < properties.length; i++) {\r\n            dropdownOptions.push({\r\n                value: properties[i],\r\n                label: supportCardProperties[properties[i]].friendly_name\r\n            });\r\n        }\r\n\r\n        const resultsTable = [\r\n            [resultValues[0].startingStats[0], resultValues[0].startingStats[1], resultValues[0].startingStats[2], resultValues[0].startingStats[0] + resultValues[0].startingStats[1] + resultValues[0].startingStats[2]],\r\n            [resultValues[0].startingMult[0], resultValues[0].startingMult[1], resultValues[0].startingMult[2], resultValues[0].startingMult[0] + resultValues[0].startingMult[1] + resultValues[0].startingMult[2]],\r\n            [Math.round(resultValues[0].finalScore[0]), Math.round(resultValues[0].finalScore[1]), Math.round(resultValues[0].finalScore[2]), Math.round(resultValues[0].finalScore[0]) + Math.round(resultValues[0].finalScore[1]) + Math.round(resultValues[0].finalScore[2])],\r\n        ];\r\n\r\n        const rowLabels = [\"Starting  Stats\", \"Stats Multiplier\", \"Predicted Final Stats\"];\r\n\r\n        let results = [];\r\n\r\n        /*\r\n        const resultsTable2 = [\r\n            [resultValues[0].startingStats[0], resultValues[0].startingStats[1], resultValues[0].startingStats[2], resultValues[0].startingStats[0] + resultValues[0].startingStats[1] + resultValues[0].startingStats[2]],\r\n            [resultValues[0].startingMult[0], resultValues[0].startingMult[1], resultValues[0].startingMult[2], resultValues[0].startingMult[0] + resultValues[0].startingMult[1] + resultValues[0].startingMult[2]],\r\n            [Math.round(resultValues[0].finalScore[0]), Math.round(resultValues[0].finalScore[1]), Math.round(resultValues[0].finalScore[2]), Math.round(resultValues[0].finalScore[0]) + Math.round(resultValues[0].finalScore[1]) + Math.round(resultValues[0].finalScore[2])],\r\n        ];\r\n\r\n        const rowLabels2 = [\"Starting  Stats\", \"Stats Multiplier\", \"Predicted Final Stats\"];\r\n\r\n        let results2 = [];\r\n        */\r\n\r\n        let statPoints = Math.round(((resultValues[0].finalScore[0] + resultValues[0].finalScore[1] + resultValues[0].finalScore[2]) * 2.3) - 0.5);\r\n\r\n        let requirements = [18000, 16000, 14500, 13000, 11500];\r\n        let examReq = [0, 0, 0, 0, 0];\r\n        for (let i = 0; i < requirements.length; i++) {\r\n            requirements[i] -= statPoints + 1700\r\n            if (requirements[i] < 1500) {\r\n                examReq[i] = requirements[i] * (100 / 30);\r\n            } else if (requirements[i] < 2250) {\r\n                requirements[i] -= 1500;\r\n                examReq[i] = 5000 + requirements[i] * (100 / 15);\r\n            } else if (requirements[i] < 3050) {\r\n                requirements[i] -= 1500 + 750;\r\n                examReq[i] = 5000 + 5000 + requirements[i] * (100 / 8);\r\n            } else if (requirements[i] < 3450) {\r\n                requirements[i] -= - 1500 + 750 + 800;\r\n                examReq[i] = 5000 + 5000 + 10000 + requirements[i] * (100 / 4);\r\n            } else if (requirements[i] < 3650) {\r\n                requirements[i] -= 1500 + 750 + 800 + 400;\r\n                examReq[i] = 5000 + 5000 + 10000 + 10000 + requirements[i] * (100 / 2);\r\n            } else {\r\n                requirements[i] -= 1500 + 750 + 800 + 400 + 200;\r\n                examReq[i] = 5000 + 5000 + 10000 + 10000 + 10000 + requirements[i] * (100 / 1);\r\n            }\r\n        };\r\n\r\n        results.push(\r\n            <div className=\"weights\" key={resultValues[0].finalScore[0]}>\r\n                <div className=\"weight-row\">\r\n                    <button id=\"results-toggle\" type=\"button\" onClick={this.onToggleResults}>{this.state.show ? \"Hide Results\" : \"Show Results\"}</button>\r\n                </div>\r\n                {\r\n                    this.state.show &&\r\n                    <>\r\n                        <div className=\"number-table-container\">\r\n                            <div className=\"number-table\">\r\n                                <table>\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th></th>\r\n                                            <th>Vocal</th>\r\n                                            <th>Dance</th>\r\n                                            <th>Visual</th>\r\n                                            <th>Total</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        {resultsTable.map((row, rowIndex) => (\r\n                                            <tr key={rowIndex}>\r\n                                                <td><b>{rowLabels[rowIndex]}</b></td> \r\n                                                {row.map((num, colIndex) => (\r\n                                                    <td key={colIndex}>\r\n                                                        {rowIndex === 1 ? `${num}%` : num}\r\n                                                    </td>\r\n                                                ))}\r\n                                            </tr>\r\n                                        ))}\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                            \r\n                        </div>\r\n                        <div nameClass = \"section-text\">\r\n                            Estimated exam score needed for grade: SS+: {examReq[0]}, SS: {examReq[1]}, S+: {examReq[2]}, S: {examReq[3]}, A+: {examReq[4]}               \r\n                        </div>\r\n                        <br />\r\n                    </>\r\n                }\r\n            </div>\r\n        );\r\n        \r\n        \r\n     \r\n\r\n\r\n        return (\r\n            <div className=\"tier-list\">\r\n                <div className=\"section-explanation\">\r\n                    {results}\r\n                </div>\r\n                \r\n                <div className=\"selectors\">\r\n                    <span className=\"selectLabel\">Show Stats:</span>\r\n                    <Select className=\"select\" options={dropdownOptions} onChange={this.onDropdown1Changed} defaultValue={{ value: \"none\", label: \"None\" }} />\r\n                    <Select className=\"select\" options={dropdownOptions} onChange={this.onDropdown2Changed} defaultValue={{ value: \"none\", label: \"None\" }} />\r\n                    <Select className=\"select\" options={dropdownOptions} onChange={this.onDropdown3Changed} defaultValue={{ value: \"none\", label: \"None\" }} />\r\n                </div>\r\n                <span className=\"label\">\r\n                Cards are ordered within tiers, but tiers are relatively arbitrary since I just used the Uma setting. <br />\r\n                    Asari cards ruin literally everything I've done because I forgot they existed, and thus, will not be implemented for now. \r\n                </span>\r\n                {tiers}\r\n            </div>\r\n        );\r\n    }\r\n    \r\n}\r\n\r\nconst tierNames = ['S', 'A', 'B', 'C', 'D', 'E', 'F']\r\nfunction processCards(cards, weights, selectedCards) {\r\n    \r\n    let processedCards = [];\r\n    selectedCards = selectedCards.slice();\r\n    \r\n    // Calculate some stuff here so we don't have to do it a million times later\r\n    for (let card = 0; card < selectedCards.length; card++) {\r\n        let selectedCard = selectedCards[card];\r\n        selectedCard.index = card;\r\n    }\r\n\r\n    for (let i = 0; i < cards.length; i++) {\r\n        let info = {};\r\n        let card = JSON.parse(JSON.stringify(cards[i]));\r\n        card.index = 6;\r\n\r\n        // Add starting stats and stats from events\r\n        let score = 0;\r\n        let statGains = card.start_b;\r\n\r\n        info.type = card.type;\r\n        info.plan = card.plan;\r\n        info.start_b = card.start_b;\r\n        info.pb = card.pb;\r\n        info.spRate = card.sp_r;\r\n        info.spp = card.spp;\r\n\r\n        if (card.type === 0) {\r\n            statGains += card.pb * weights.vocalLessons[0];\r\n        } else if (card.type === 1) {\r\n            statGains += card.pb * weights.danceLessons[0];\r\n        } else {\r\n            statGains += card.pb * weights.visualLessons[0];\r\n        }\r\n\r\n        if (card.type === 0) {\r\n            statGains += card.lb * weights.vocalLessons[1];\r\n        } else if (card.type === 1) {\r\n            statGains += card.lb * weights.danceLessons[1];\r\n        } else {\r\n            statGains += card.lb * weights.visualLessons[1];\r\n        }\r\n\r\n        if (card.type === 0) {\r\n            statGains += card.sp_lb * weights.vocalLessons[2];\r\n        } else if (card.type === 1) {\r\n            statGains += card.sp_lb * weights.danceLessons[2];\r\n        } else {\r\n            statGains += card.sp_lb * weights.visualLessons[2];\r\n        }\r\n\r\n        if (card.type === 0) {\r\n            statGains += card.n_lb * weights.vocalLessons[3];\r\n        } else if (card.type === 1) {\r\n            statGains += card.n_lb * weights.danceLessons[3];\r\n        } else {\r\n            statGains += card.n_lb * weights.visualLessons[3];\r\n        }\r\n\r\n        statGains += card.rest_b * weights.rest;\r\n        statGains += card.gb * weights.gift;\r\n        statGains += card.db * weights.date;\r\n        statGains += card.sb * weights.shop;\r\n        statGains += card.cb * weights.classroom;\r\n        statGains += card.pdb * weights.drink;\r\n        statGains += card.mb;\r\n        \r\n        statGains += card.ub * weights.upgrade.reduce((total, current) => total + current, 0);\r\n        statGains += card.m_ub * weights.upgrade[1];\r\n\r\n        statGains += card.a_cb * weights.cardAcq[0];\r\n        statGains += card.m_cb * weights.cardAcq[1];\r\n        statGains += card.con_cb * weights.cardAcq[2];\r\n\r\n        statGains += card.remove_b * weights.removal;\r\n\r\n        // Convert stat gains to score\r\n        score += statGains;\r\n\r\n        processedCards.push({\r\n            id: card.id,\r\n            lb: card.limit_break,\r\n            score: score,\r\n            info: info,\r\n            char_name: card.char_name\r\n        })\r\n    }\r\n    processedCards.sort((a, b) => b.score - a.score);\r\n    return processedCards;\r\n}\r\n\r\nfunction processScores(processedCards, weights, selectedCards) {\r\n    selectedCards = selectedCards.slice();\r\n    let startingStats = [0, 0, 0];\r\n    startingStats = startingStats.map((stat, index) => stat + weights.idolStats[index] + weights.memStats[index]);\r\n    \r\n\r\n    let idolMemMult = [0, 0, 0];\r\n    idolMemMult = idolMemMult.map((stat, index) => stat + weights.idolMult[index] + weights.memMult[index]);\r\n    let startingMult = idolMemMult;\r\n\r\n    let cardBonus = [0, 0, 0];\r\n    let cardStartBonus = [0, 0, 0];\r\n\r\n    let spRate = weights.spRate;\r\n    for (let card = 0; card < selectedCards.length; card++) {\r\n        let cardID = selectedCards[card].id;\r\n        let cardLB = selectedCards[card].limit_break\r\n        let type = selectedCards[card].type\r\n        let matchingCards = processedCards.find(processedCards => processedCards.id === cardID && processedCards.lb === cardLB);\r\n\r\n        startingStats[type] += matchingCards.info.start_b;\r\n        startingMult[type] += (matchingCards.info.pb*100);\r\n        \r\n        spRate += matchingCards.info.spRate;\r\n\r\n        cardBonus[type] += matchingCards.score;\r\n\r\n        cardStartBonus[type] += matchingCards.info.start_b;\r\n        \r\n    }\r\n    let examBonus = 50;\r\n    \r\n    let lessonGain = [(1 + (idolMemMult[0] / 100)) * weights.vocalLessons[0], (1 + (idolMemMult[1] / 100)) * weights.danceLessons[0], (1 + (idolMemMult[2] / 100)) * weights.visualLessons[0]]\r\n    \r\n    let finalScore = startingStats.map((stat, index) => stat + cardBonus[index] + lessonGain[index] + weights.classroomStats[index] + examBonus - cardStartBonus[index]);\r\n    let roundedScore = Object.fromEntries(\r\n        Object.entries(finalScore).map(([key, value]) => [key, Math.min(value, weights.statCap)])\r\n    );\r\n\r\n    let results = [{\r\n        startingStats: startingStats,\r\n        startingMult: startingMult,\r\n        spRate: spRate,\r\n        cardBonus: cardBonus,\r\n        finalScore: roundedScore,\r\n    }]\r\n    \r\n    return results;\r\n    }\r\n   \r\n\r\nexport default TierList;"]},"metadata":{},"sourceType":"module"}