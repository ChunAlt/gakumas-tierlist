{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Chun\\\\GakuTest\\\\src\\\\components\\\\TierList.js\";\nimport React from 'react';\nimport SupportCard from './SupportCard';\nimport events from '../card-events';\nimport { supportCardProperties } from '../constants';\nimport Select from 'react-select';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ordinal = [\"1st\", \"2nd\", \"3rd\", \"4th\", \"5th\", \"6th\", \"7th\"];\nconst type_names = [\"Speed\", \"Stamina\", \"Power\", \"Guts\", \"Wisdom\", \"\", \"Friend\"];\n\nclass TierList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dropdownSelections: [\"none\", \"none\", \"none\"]\n    };\n    this.onDropdown1Changed = this.onDropdown1Changed.bind(this);\n    this.onDropdown2Changed = this.onDropdown2Changed.bind(this);\n    this.onDropdown3Changed = this.onDropdown3Changed.bind(this);\n  } //lmao\n\n\n  onDropdown1Changed(newValue) {\n    let newSelections = this.state.dropdownSelections.slice();\n    newSelections[0] = newValue.value;\n    console.log(newValue);\n    this.setState({\n      dropdownSelections: newSelections\n    });\n  }\n\n  onDropdown2Changed(newValue) {\n    let newSelections = this.state.dropdownSelections.slice();\n    newSelections[1] = newValue.value;\n    this.setState({\n      dropdownSelections: newSelections\n    });\n  }\n\n  onDropdown3Changed(newValue) {\n    let newSelections = this.state.dropdownSelections.slice();\n    newSelections[2] = newValue.value;\n    this.setState({\n      dropdownSelections: newSelections\n    });\n  }\n\n  render() {\n    let cards = this.props.cards;\n    let selectedNames = this.props.selectedCards.map(card => card.char_name);\n\n    if (this.props.weights.type > -1) {\n      cards = cards.filter(e => e.type === this.props.weights.type);\n    }\n\n    let processedCards = processCards(cards, this.props.weights, this.props.selectedCards);\n\n    if (processedCards.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tier-list\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 20\n      }, this);\n    }\n\n    let rows = [[]];\n    let current_row = 0;\n    let step = (processedCards[0].score - processedCards[processedCards.length - 1].score) / 7;\n    let boundary = processedCards[0].score - step;\n\n    for (let i = 0; i < processedCards.length; i++) {\n      while (processedCards[i].score < boundary - 1) {\n        rows.push([]);\n        current_row++;\n        boundary -= step;\n      }\n\n      rows[current_row].push( /*#__PURE__*/_jsxDEV(SupportCard, {\n        id: processedCards[i].id,\n        lb: processedCards[i].lb,\n        score: processedCards[i].score,\n        info: processedCards[i].info,\n        charName: processedCards[i].char_name,\n        selected: selectedNames,\n        card: cards.find(c => c.id === processedCards[i].id && c.limit_break === processedCards[i].lb),\n        onClick: () => this.props.cardSelected(cards.find(c => c.id === processedCards[i].id && c.limit_break === processedCards[i].lb)),\n        stats: this.state.dropdownSelections\n      }, processedCards[i].id + \"LB\" + processedCards[i].lb, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this));\n    }\n\n    let tiers = [];\n\n    for (let i = 0; i < 7; i++) {\n      tiers.push( /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tier\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tier-letter\",\n          children: tierNames[i]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tier-images\",\n          children: rows[i]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this)]\n      }, tierNames[i], true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this));\n    }\n\n    let count = this.props.selectedCards.filter(c => c.type == this.props.weights.type).length;\n    let dropdownOptions = [{\n      value: \"none\",\n      label: \"None\"\n    }];\n    let properties = Object.keys(supportCardProperties).sort();\n\n    for (let i = 0; i < properties.length; i++) {\n      dropdownOptions.push({\n        value: properties[i],\n        label: supportCardProperties[properties[i]].friendly_name\n      });\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tier-list\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"selectors\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"selectLabel\",\n          children: \"Show Stats:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          className: \"select\",\n          options: dropdownOptions,\n          onChange: this.onDropdown1Changed,\n          defaultValue: {\n            value: \"none\",\n            label: \"None\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          className: \"select\",\n          options: dropdownOptions,\n          onChange: this.onDropdown2Changed,\n          defaultValue: {\n            value: \"none\",\n            label: \"None\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          className: \"select\",\n          options: dropdownOptions,\n          onChange: this.onDropdown3Changed,\n          defaultValue: {\n            value: \"none\",\n            label: \"None\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"label\",\n        children: [\"Ranking for the \", ordinal[count], \" \", type_names[this.props.weights.type], \" card in this deck:\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this), tiers]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst tierNames = ['S', 'A', 'B', 'C', 'D', 'E', 'F'];\nconst raceRewards = [[2, 2, 2, 2, 2, 35], [1.6, 1.6, 1.6, 1.6, 1.6, 25], [1, 1, 1, 1, 1, 20], [13.5, 13.5, 13.5, 13.5, 13.5, 50]];\n\nfunction processCards(cards, weights, selectedCards) {\n  let processedCards = [];\n  selectedCards = selectedCards.slice(); // Calculate some stuff here so we don't have to do it a million times later\n\n  let presentTypes = [false, false, false, false, false, false, false];\n  let cardsPerType = [[], [], [], [], [], [], []];\n  let baseBondNeeded = 0;\n\n  for (let card = 0; card < selectedCards.length; card++) {\n    let selectedCard = selectedCards[card];\n    let cardSpecialty = (100 + selectedCard.specialty_rate + weights.bonusSpec) * selectedCard.unique_specialty * selectedCard.fs_specialty;\n    let cardSpecialtyPercent = cardSpecialty / (450 + cardSpecialty);\n    selectedCard.rainbowSpecialty = cardSpecialtyPercent;\n    selectedCard.offSpecialty = 100 / (450 + cardSpecialty);\n    selectedCard.cardType = selectedCard.type;\n    selectedCard.index = card;\n    presentTypes[selectedCard.cardType] = true;\n    cardsPerType[selectedCard.cardType].push(selectedCard);\n\n    if (selectedCard.cardType == 6) {\n      baseBondNeeded += 55 - selectedCard.sb;\n    } else {\n      baseBondNeeded += 75 - selectedCard.sb;\n    }\n\n    if (events[selectedCard.id]) {\n      baseBondNeeded -= events[selectedCard.id][7];\n    }\n  }\n\n  let preferredRainbowChances = [0, 0, 0, 0, 0];\n\n  for (let i = 0; i < 5; i++) {\n    if (i != weights.type) {\n      if (cardsPerType[i].length > 0) {\n        let minimum = 1;\n\n        if (weights.prioritize) {\n          minimum = 2;\n        }\n\n        let combos = GetCombinations(cardsPerType[i], minimum);\n\n        if (combos.length > 0) {\n          preferredRainbowChances[i] = combos.reduce((current, combo) => {\n            return current += CalculateCombinationChance(combo, undefined, i);\n          }, 0);\n        }\n      }\n    }\n  }\n\n  let chanceOfPreferredRainbow = 1 - preferredRainbowChances.reduce((current, chance) => {\n    return current * (1 - chance);\n  }, 1);\n\n  for (let i = 0; i < cards.length; i++) {\n    let info = {};\n    let card = JSON.parse(JSON.stringify(cards[i]));\n    let cardType = card.type;\n    card.index = 6;\n    let bondNeeded = baseBondNeeded;\n\n    if (cardType == 6) {\n      bondNeeded += 55 - card.sb;\n    } else {\n      bondNeeded += 75 - card.sb;\n    }\n\n    let presentTypesWithCard = presentTypes.slice();\n    presentTypesWithCard[cardType] = true;\n    let typeCount = presentTypesWithCard.filter(Boolean).length; // Add starting stats and stats from events\n\n    let score = card.sb;\n    let energyGain = 0;\n    let statGains = card.starting_stats.slice();\n    statGains.push(0);\n    info.starting_stats = card.starting_stats.slice();\n    info.event_stats = [0, 0, 0, 0, 0, 0, 0];\n\n    if (events[card.id]) {\n      info.event_stats = events[card.id].slice();\n\n      for (let stat = 0; stat < 6; stat++) {\n        statGains[stat] += events[card.id][stat] * card.effect_size_up;\n        info.event_stats[stat] = events[card.id][stat] * card.effect_size_up;\n      }\n\n      energyGain += events[card.id][6] * card.energy_up;\n      bondNeeded -= events[card.id][7];\n      score += events[card.id][7];\n    } else {\n      // Dummy event values for cards we don't yet know the events for\n      if (card.rarity === 2) {\n        // 35 total\n        for (let stat = 0; stat < 5; stat++) {\n          statGains[stat] += 7;\n        }\n\n        bondNeeded -= 5;\n      } else if (card.rarity === 3) {\n        // 45 total\n        for (let stat = 0; stat < 5; stat++) {\n          statGains[stat] += 9;\n        }\n\n        bondNeeded -= 5;\n      }\n\n      score += 5;\n    }\n\n    if (card.type_stats > 0) {\n      statGains[card.type] += card.type_stats;\n\n      for (let sc = 0; sc < selectedCards.length; sc++) {\n        if (selectedCards[sc].type < 6) {\n          statGains[selectedCards[sc].type] += card.type_stats;\n        } else {\n          statGains[0] += card.type_stats / 5;\n          statGains[1] += card.type_stats / 5;\n          statGains[2] += card.type_stats / 5;\n          statGains[3] += card.type_stats / 5;\n          statGains[4] += card.type_stats / 5;\n        }\n      }\n    }\n\n    let trainingDays = 65 - weights.races[0] - weights.races[1] - weights.races[2];\n    if (cardType === 6) trainingDays -= 5;\n    let daysToBond = bondNeeded / weights.bondPerDay;\n    let rainbowDays = trainingDays - daysToBond;\n    let specialty = (100 + card.specialty_rate + weights.bonusSpec) * card.unique_specialty * card.fs_specialty;\n    let specialtyPercent = specialty / (450 + specialty);\n    let otherPercent = 100 / (450 + specialty);\n    let offstatAppearanceDenominator = card.offstat_appearance_denominator;\n    let daysPerTraining = [0, 0, 0, 0, 0];\n    let bondedDaysPerTraining = [0, 0, 0, 0, 0];\n    let rainbowTraining = 0;\n    let rainbowOverride = 1;\n\n    if (cardType != 6) {\n      let chanceOfSingleRainbow = 0;\n      let cardsOfThisType = cardsPerType[cardType].slice();\n      card.rainbowSpecialty = specialtyPercent;\n      card.offSpecialty = otherPercent;\n      cardsOfThisType.push(card);\n\n      for (let j = 0; j < cardsOfThisType.length; j++) {\n        console.log(cardsOfThisType);\n        chanceOfSingleRainbow += CalculateCombinationChance([cardsOfThisType[j]], cardsOfThisType, cardType);\n      }\n\n      rainbowOverride = 1 - chanceOfPreferredRainbow * chanceOfSingleRainbow;\n    } // Calculate appearance rates on each training\n\n\n    for (let stat = 0; stat < 5; stat++) {\n      if (stat == cardType) {\n        rainbowTraining = specialtyPercent * rainbowDays * rainbowOverride;\n        daysPerTraining[stat] = specialtyPercent * daysToBond;\n      } else {\n        daysPerTraining[stat] = otherPercent / offstatAppearanceDenominator * daysToBond;\n        bondedDaysPerTraining[stat] = otherPercent / offstatAppearanceDenominator * rainbowDays;\n      }\n    }\n\n    if (weights.onlySummer) {\n      rainbowTraining = 8 * specialtyPercent * rainbowOverride;\n    }\n\n    if (card.fs_ramp[0] > 0) {\n      let current_bonus = 0;\n      let total = 0;\n\n      for (let j = rainbowTraining * 0.66; j > 0; j--) {\n        total += current_bonus;\n        current_bonus = Math.min(current_bonus + card.fs_ramp[0], card.fs_ramp[1]);\n      }\n\n      card.unique_fs_bonus = 1 + total / rainbowTraining / 100;\n    } // Stats from cross-training\n\n\n    info.non_rainbow_gains = [0, 0, 0, 0, 0, 0, 0];\n\n    for (let training = 0; training < 5; training++) {\n      let gains = weights.unbondedTrainingGain[training];\n      let daysOnThisTraining = daysPerTraining[training];\n      energyGain += daysOnThisTraining * gains[6] * card.energy_discount;\n      let trainingGains = CalculateCrossTrainingGain(gains, weights, card, selectedCards, training, daysOnThisTraining, typeCount, false);\n\n      for (let stat = 0; stat < 6; stat++) {\n        statGains[stat] += trainingGains[stat];\n        info.non_rainbow_gains[stat] += trainingGains[stat];\n      }\n\n      info.non_rainbow_gains[6] += daysOnThisTraining * gains[6] * card.energy_discount;\n    } // Stats from cross-training while bonded\n\n\n    for (let training = 0; training < 5; training++) {\n      let gains = weights.bondedTrainingGain[training];\n      let daysOnThisTraining = bondedDaysPerTraining[training];\n      energyGain += daysOnThisTraining * gains[6] * card.energy_discount;\n      energyGain += daysOnThisTraining * gains[6] * card.fs_energy;\n      let trainingGains = CalculateCrossTrainingGain(gains, weights, card, selectedCards, training, daysOnThisTraining, typeCount, true);\n\n      for (let stat = 0; stat < 6; stat++) {\n        statGains[stat] += trainingGains[stat];\n        info.non_rainbow_gains[stat] += trainingGains[stat];\n      }\n\n      info.non_rainbow_gains[6] += daysOnThisTraining * gains[6] * card.energy_discount;\n      info.non_rainbow_gains[6] += daysOnThisTraining * gains[6] * card.fs_energy;\n\n      if (training == 4 && card.group) {\n        energyGain += daysOnThisTraining * card.wisdom_recovery / 5;\n      }\n    }\n\n    info.rainbow_gains = [0, 0, 0, 0, 0, 0, 0]; // Stats from rainbows\n\n    if (cardType < 6) {\n      energyGain += rainbowTraining * card.wisdom_recovery;\n      let specialtyGains = weights.bondedTrainingGain[cardType];\n\n      if (weights.onlySummer) {\n        specialtyGains = weights.summerTrainingGain[cardType];\n      }\n\n      let trainingGains = CalculateTrainingGain(specialtyGains, weights, card, selectedCards, cardType, rainbowTraining, true, typeCount);\n      info.rainbow_gains = trainingGains.slice();\n      info.rainbow_gains.push(rainbowTraining * card.wisdom_recovery);\n\n      for (let stat = 0; stat < 6; stat++) {\n        statGains[stat] += trainingGains[stat];\n      }\n    }\n\n    info.race_bonus_gains = 0; // Race bonus\n\n    for (let raceType = 0; raceType < 4; raceType++) {\n      for (let stat = 0; stat < 6; stat++) {\n        statGains[stat] += raceRewards[raceType][stat] * (card.race_bonus / 100) * weights.races[raceType];\n        info.race_bonus_gains += raceRewards[raceType][stat] * (card.race_bonus / 100) * weights.races[raceType];\n      }\n    } // Convert stat gains to score\n\n\n    score += GainsToScore(statGains, weights);\n    score += energyGain * weights.stats[6];\n\n    if (weights.scenarioLink.indexOf(card.char_name) > -1) {\n      score += weights.scenarioBonus;\n    }\n\n    processedCards.push({\n      id: card.id,\n      lb: card.limit_break,\n      score: score,\n      info: info,\n      char_name: card.char_name\n    });\n  }\n\n  processedCards.sort((a, b) => b.score - a.score);\n  return processedCards;\n}\n\nfunction CalculateTrainingGain(gains, weights, card, otherCards, trainingType, days, rainbow, typeCount) {\n  let trainingGains = [0, 0, 0, 0, 0, 0, 0];\n  let trainingBonus = card.tb + card.fan_bonus * weights.fanBonus;\n  if (typeCount >= card.highlander_threshold) trainingBonus += card.highlander_training;\n  let fsBonus = 1;\n  let motivationBonus = card.mb;\n\n  if (rainbow) {\n    fsBonus = card.fs_bonus * card.unique_fs_bonus;\n    motivationBonus += card.fs_motivation;\n    trainingBonus += card.fs_training;\n  }\n\n  let soloGain = [0, 0, 0, 0, 0, 0];\n\n  for (let stat = 0; stat < 6; stat++) {\n    if (gains[stat] === 0) continue;\n    let base = gains[stat] + card.stat_bonus[stat];\n\n    if (rainbow) {\n      base += card.fs_stats[stat];\n    }\n\n    soloGain[stat] += base * trainingBonus * (1 + weights.motivation * motivationBonus) * fsBonus * 1.05 * weights.umaBonus[stat] - gains[stat];\n  }\n\n  if (GainsToScore(soloGain, weights) > weights.minimum) {\n    for (let stat = 0; stat < 6; stat++) {\n      trainingGains[stat] += soloGain[stat] * days * CalculateCombinationChance([], otherCards, trainingType) * (rainbow ? weights.multi : 1);\n    }\n  }\n\n  if (otherCards.length == 0) return trainingGains;\n  const combinations = GetCombinations(otherCards);\n\n  for (let i = 0; i < combinations.length; i++) {\n    let fullCombinationGains = [0, 0, 0, 0, 0, 0];\n    let fullTotalGains = [0, 0, 0, 0, 0, 0];\n    trainingBonus += (combinations[i].length + 1) * card.crowd_bonus;\n    const combinationTrainingBonus = combinations[i].reduce((current, c) => {\n      let training = current + (c.tb - 1) + combinations[i].length * c.crowd_bonus;\n      if (typeCount >= c.highlander_threshold) training += c.highlander_training;\n      return training;\n    }, 1);\n    const combinationFriendshipBonus = combinations[i].reduce((current, c) => {\n      if (c.cardType === trainingType) {\n        return current * c.fs_bonus * c.unique_fs_bonus;\n      } else {\n        return current;\n      }\n    }, 1);\n    const combinationMotivationBonus = combinations[i].reduce((current, c) => current + c.mb - 1, 1);\n\n    for (let stat = 0; stat < 6; stat++) {\n      if (gains[stat] === 0) continue;\n      const combinationStatBonus = combinations[i].reduce((current, c) => current + c.stat_bonus[stat], 0);\n      let base = gains[stat] + combinationStatBonus;\n\n      if (rainbow) {\n        base += card.fs_stats[stat];\n      }\n\n      let combinationGains = base * combinationTrainingBonus * (1 + weights.motivation * combinationMotivationBonus) * combinationFriendshipBonus * (1.05 * combinations[i].length) * weights.umaBonus[stat];\n      let totalGains = (base + card.stat_bonus[stat]) * (combinationTrainingBonus + trainingBonus - 1) * (1 + weights.motivation * (combinationMotivationBonus + motivationBonus - 1)) * (combinationFriendshipBonus * fsBonus) * (1.05 * (combinations[i].length + 1)) * weights.umaBonus[stat];\n      fullCombinationGains[stat] += combinationGains;\n      fullTotalGains[stat] += totalGains;\n    }\n\n    trainingBonus -= (combinations[i].length + 1) * card.crowd_bonus;\n\n    if (GainsToScore(fullTotalGains, weights) > weights.minimum) {\n      for (let stat = 0; stat < 6; stat++) {\n        trainingGains[stat] += (fullTotalGains[stat] - fullCombinationGains[stat]) * days * CalculateCombinationChance(combinations[i], otherCards, trainingType) * (rainbow ? weights.multi : 1);\n      }\n    }\n  }\n\n  return trainingGains;\n}\n\n_c = CalculateTrainingGain;\n\nfunction CalculateCrossTrainingGain(gains, weights, card, otherCards, trainingType, days, typeCount, bonded) {\n  let trainingGains = [0, 0, 0, 0, 0, 0, 0];\n  let statCards = otherCards.filter(c => c.cardType === trainingType);\n  let trainingBonus = card.tb + card.fan_bonus * weights.fanBonus;\n  if (typeCount >= card.highlander_threshold) trainingBonus += card.highlander_training;\n  let fsBonus = 1;\n\n  if (card.group && bonded) {\n    fsBonus += (card.fs_bonus + card.unique_fs_bonus - 1) / 5;\n  }\n\n  const combinations = GetCombinations(otherCards);\n\n  for (let i = 0; i < combinations.length; i++) {\n    const combination = combinations[i];\n    let fullCombinationGains = [0, 0, 0, 0, 0, 0];\n    let fullTotalGains = [0, 0, 0, 0, 0, 0];\n    trainingBonus += (combination.length + 1) * card.crowd_bonus;\n    const combinationTrainingBonus = combination.reduce((current, c) => {\n      let training = current + (c.tb - 1) + combination.length * c.crowd_bonus;\n      if (typeCount >= c.highlander_threshold) training += c.highlander_training;\n      return training;\n    }, 1);\n    const combinationFriendshipBonus = combination.reduce((current, c) => {\n      if (c.cardType === trainingType) {\n        return current * c.fs_bonus * c.unique_fs_bonus;\n      } else {\n        return current;\n      }\n    }, 1);\n    const combinationMotivationBonus = combination.reduce((current, c) => current + c.mb - 1, 1);\n\n    for (let stat = 0; stat < 6; stat++) {\n      if (gains[stat] === 0) continue;\n      if (!combination.some(r => statCards.indexOf(r) > -1)) continue;\n      const combinationStatBonus = combination.reduce((current, c) => current + c.stat_bonus[stat], 0);\n      const base = gains[stat] + combinationStatBonus;\n      let combinationGains = base * combinationTrainingBonus * (1 + weights.motivation * combinationMotivationBonus) * combinationFriendshipBonus * (1.05 * combination.length) * weights.umaBonus[stat];\n      let totalGains = 0;\n\n      if (bonded) {\n        totalGains = (base + card.stat_bonus[stat] + card.fs_stats[stat]) * (combinationTrainingBonus + trainingBonus + card.fs_training - 1) * (1 + weights.motivation * (combinationMotivationBonus + card.mb + card.fs_motivation - 1)) * (combinationFriendshipBonus * fsBonus) * (1.05 * (combination.length + 1)) * weights.umaBonus[stat];\n      } else {\n        totalGains = (base + card.stat_bonus[stat]) * (combinationTrainingBonus + trainingBonus - 1) * (1 + weights.motivation * (combinationMotivationBonus + card.mb - 1)) * (1.05 * (combination.length + 1)) * weights.umaBonus[stat];\n      }\n\n      fullCombinationGains[stat] += combinationGains;\n      fullTotalGains[stat] += totalGains;\n    }\n\n    trainingBonus -= (combination.length + 1) * card.crowd_bonus;\n\n    if (GainsToScore(fullTotalGains, weights) > weights.minimum) {\n      for (let stat = 0; stat < 6; stat++) {\n        trainingGains[stat] += (fullTotalGains[stat] - fullCombinationGains[stat]) * days * CalculateCombinationChance(combinations[i], otherCards, trainingType) * weights.multi;\n      }\n    }\n  }\n\n  return trainingGains;\n}\n\n_c2 = CalculateCrossTrainingGain;\n\nfunction GainsToScore(gains, weights) {\n  let score = 0;\n\n  for (let stat = 0; stat < 6; stat++) {\n    score += Math.min(gains[stat], weights.cap) * weights.stats[stat];\n  }\n\n  return score;\n}\n\n_c3 = GainsToScore;\n\nfunction GetCombinations(cards) {\n  let minLength = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  let combinations = [];\n  let temp = [];\n  const count = Math.pow(2, cards.length);\n\n  for (let i = 0; i < count; i++) {\n    temp = [];\n\n    for (let j = 0; j < cards.length; j++) {\n      if (i & Math.pow(2, j)) {\n        temp.push(cards[j]);\n      }\n    }\n\n    if (temp.length >= minLength) {\n      combinations.push(temp);\n    }\n  }\n\n  return combinations;\n}\n\n_c4 = GetCombinations;\n\nfunction CalculateCombinationChance(combination, cards, trainingType) {\n  let chance = combination.reduce((current, card) => {\n    if (card.cardType === trainingType) {\n      return current * card.rainbowSpecialty;\n    } else {\n      return current * card.offSpecialty;\n    }\n  }, 1);\n\n  if (cards) {\n    const otherCards = cards.filter(c => combination.findIndex(d => c.index == d.index) === -1);\n    chance = otherCards.reduce((current, card) => {\n      if (card.cardType === trainingType) {\n        return current * (1 - card.rainbowSpecialty);\n      } else {\n        return current * (1 - card.offSpecialty);\n      }\n    }, chance);\n  }\n\n  return chance;\n}\n\n_c5 = CalculateCombinationChance;\nexport default TierList;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"CalculateTrainingGain\");\n$RefreshReg$(_c2, \"CalculateCrossTrainingGain\");\n$RefreshReg$(_c3, \"GainsToScore\");\n$RefreshReg$(_c4, \"GetCombinations\");\n$RefreshReg$(_c5, \"CalculateCombinationChance\");","map":{"version":3,"sources":["C:/Users/Chun/GakuTest/src/components/TierList.js"],"names":["React","SupportCard","events","supportCardProperties","Select","ordinal","type_names","TierList","Component","constructor","props","state","dropdownSelections","onDropdown1Changed","bind","onDropdown2Changed","onDropdown3Changed","newValue","newSelections","slice","value","console","log","setState","render","cards","selectedNames","selectedCards","map","card","char_name","weights","type","filter","e","processedCards","processCards","length","rows","current_row","step","score","boundary","i","push","id","lb","info","find","c","limit_break","cardSelected","tiers","tierNames","count","dropdownOptions","label","properties","Object","keys","sort","friendly_name","raceRewards","presentTypes","cardsPerType","baseBondNeeded","selectedCard","cardSpecialty","specialty_rate","bonusSpec","unique_specialty","fs_specialty","cardSpecialtyPercent","rainbowSpecialty","offSpecialty","cardType","index","sb","preferredRainbowChances","minimum","prioritize","combos","GetCombinations","reduce","current","combo","CalculateCombinationChance","undefined","chanceOfPreferredRainbow","chance","JSON","parse","stringify","bondNeeded","presentTypesWithCard","typeCount","Boolean","energyGain","statGains","starting_stats","event_stats","stat","effect_size_up","energy_up","rarity","type_stats","sc","trainingDays","races","daysToBond","bondPerDay","rainbowDays","specialty","specialtyPercent","otherPercent","offstatAppearanceDenominator","offstat_appearance_denominator","daysPerTraining","bondedDaysPerTraining","rainbowTraining","rainbowOverride","chanceOfSingleRainbow","cardsOfThisType","j","onlySummer","fs_ramp","current_bonus","total","Math","min","unique_fs_bonus","non_rainbow_gains","training","gains","unbondedTrainingGain","daysOnThisTraining","energy_discount","trainingGains","CalculateCrossTrainingGain","bondedTrainingGain","fs_energy","group","wisdom_recovery","rainbow_gains","specialtyGains","summerTrainingGain","CalculateTrainingGain","race_bonus_gains","raceType","race_bonus","GainsToScore","stats","scenarioLink","indexOf","scenarioBonus","a","b","otherCards","trainingType","days","rainbow","trainingBonus","tb","fan_bonus","fanBonus","highlander_threshold","highlander_training","fsBonus","motivationBonus","mb","fs_bonus","fs_motivation","fs_training","soloGain","base","stat_bonus","fs_stats","motivation","umaBonus","multi","combinations","fullCombinationGains","fullTotalGains","crowd_bonus","combinationTrainingBonus","combinationFriendshipBonus","combinationMotivationBonus","combinationStatBonus","combinationGains","totalGains","bonded","statCards","combination","some","r","cap","minLength","temp","pow","findIndex","d"],"mappings":"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","sourcesContent":["import React from 'react';\nimport SupportCard from './SupportCard';\nimport events from '../card-events';\nimport { supportCardProperties } from '../constants';\nimport Select from 'react-select';\n\nconst ordinal = [\"1st\", \"2nd\", \"3rd\", \"4th\", \"5th\", \"6th\", \"7th\"];\nconst type_names = [\"Speed\", \"Stamina\", \"Power\", \"Guts\", \"Wisdom\", \"\", \"Friend\"];\n\nclass TierList extends React.Component {\n    constructor (props) {\n        super(props);\n\n        this.state = {\n            dropdownSelections: [\"none\",\"none\",\"none\"]\n        }\n\n        this.onDropdown1Changed = this.onDropdown1Changed.bind(this);\n        this.onDropdown2Changed = this.onDropdown2Changed.bind(this);\n        this.onDropdown3Changed = this.onDropdown3Changed.bind(this);\n    }\n\n    //lmao\n    onDropdown1Changed(newValue) {\n        let newSelections = this.state.dropdownSelections.slice();\n        newSelections[0] = newValue.value;\n        console.log(newValue);\n        this.setState({dropdownSelections:newSelections});\n    }\n    onDropdown2Changed(newValue) {\n        let newSelections = this.state.dropdownSelections.slice();\n        newSelections[1] = newValue.value;\n        this.setState({dropdownSelections:newSelections});\n    }\n    onDropdown3Changed(newValue) {\n        let newSelections = this.state.dropdownSelections.slice();\n        newSelections[2] = newValue.value;\n        this.setState({dropdownSelections:newSelections});\n    }\n\n    render() {\n        let cards = this.props.cards;\n        let selectedNames = this.props.selectedCards.map(card => card.char_name);\n    \n        if(this.props.weights.type > -1) {\n            cards = cards.filter(e => e.type === this.props.weights.type);\n        }\n    \n        let processedCards = processCards(cards, this.props.weights, this.props.selectedCards);\n    \n        if (processedCards.length === 0) {\n            return <div className=\"tier-list\"></div>;\n        }\n    \n        let rows = [[]];\n        let current_row = 0;\n        let step = (processedCards[0].score - processedCards[processedCards.length - 1].score) / 7;\n        let boundary = processedCards[0].score - step;\n    \n        for (let i = 0; i < processedCards.length; i++) {\n            while (processedCards[i].score < boundary - 1) {\n                rows.push([]);\n                current_row++;\n                boundary -= step;\n            }\n    \n            rows[current_row].push((\n                <SupportCard\n                    id={processedCards[i].id}\n                    lb={processedCards[i].lb}\n                    score={processedCards[i].score}\n                    key={processedCards[i].id + \"LB\" + processedCards[i].lb}\n                    info={processedCards[i].info}\n                    charName={processedCards[i].char_name}\n                    selected={selectedNames}\n                    card={cards.find((c) => c.id === processedCards[i].id && c.limit_break === processedCards[i].lb)}\n                    onClick={() => this.props.cardSelected(cards.find((c) => c.id === processedCards[i].id && c.limit_break === processedCards[i].lb))}\n                    stats={this.state.dropdownSelections}\n                />\n            ));\n        }\n    \n        let tiers = [];\n    \n        for (let i = 0; i < 7; i++) {\n            tiers.push(\n                <div className=\"tier\" key={tierNames[i]}>\n                    <div className=\"tier-letter\">{tierNames[i]}</div>\n                    <div className=\"tier-images\">{rows[i]}</div>\n                </div>\n            )\n        }\n    \n        let count = this.props.selectedCards.filter((c) => c.type == this.props.weights.type).length;\n        let dropdownOptions = [{value:\"none\", label:\"None\"}];\n        let properties = Object.keys(supportCardProperties).sort();\n        for (let i = 0; i < properties.length; i++) {\n            dropdownOptions.push({\n                value:properties[i],\n                label:supportCardProperties[properties[i]].friendly_name\n            });\n        }\n    \n        return (\n            <div className=\"tier-list\">\n                <div className=\"selectors\">\n                    <span className=\"selectLabel\">Show Stats:</span>\n                    <Select className=\"select\" options={dropdownOptions} onChange={this.onDropdown1Changed} defaultValue={{value:\"none\", label:\"None\"}}/>\n                    <Select className=\"select\" options={dropdownOptions} onChange={this.onDropdown2Changed} defaultValue={{value:\"none\", label:\"None\"}}/>\n                    <Select className=\"select\" options={dropdownOptions} onChange={this.onDropdown3Changed} defaultValue={{value:\"none\", label:\"None\"}}/>\n                </div>\n                <span className=\"label\">Ranking for the {ordinal[count]} {type_names[this.props.weights.type]} card in this deck:</span>\n                {tiers}\n            </div>\n        );\n    }\n}\n\nconst tierNames = ['S', 'A', 'B', 'C', 'D', 'E', 'F']\nconst raceRewards = [\n    [2, 2, 2, 2, 2, 35],\n    [1.6, 1.6, 1.6, 1.6, 1.6, 25],\n    [1, 1, 1, 1, 1, 20],\n    [13.5,13.5,13.5,13.5,13.5,50]\n]\n\nfunction processCards(cards, weights, selectedCards) {\n    let processedCards = [];\n    selectedCards = selectedCards.slice();\n    \n    // Calculate some stuff here so we don't have to do it a million times later\n    let presentTypes = [false,false,false,false,false,false,false];\n    let cardsPerType = [[],[],[],[],[],[],[]];\n    let baseBondNeeded = 0;\n    for (let card = 0; card < selectedCards.length; card++) {\n        let selectedCard = selectedCards[card];\n        let cardSpecialty = (100 + selectedCard.specialty_rate + weights.bonusSpec) * selectedCard.unique_specialty * selectedCard.fs_specialty;\n        let cardSpecialtyPercent = (cardSpecialty) / (450 + cardSpecialty)\n        selectedCard.rainbowSpecialty = cardSpecialtyPercent;\n        selectedCard.offSpecialty = 100 / (450 + cardSpecialty);\n        selectedCard.cardType = selectedCard.type;\n        selectedCard.index = card;\n        presentTypes[selectedCard.cardType] = true;\n        cardsPerType[selectedCard.cardType].push(selectedCard);\n        if (selectedCard.cardType == 6) {\n            baseBondNeeded += 55 - selectedCard.sb\n        } else {\n            baseBondNeeded += 75 - selectedCard.sb\n        }\n        if (events[selectedCard.id]) {\n            baseBondNeeded -= events[selectedCard.id][7];\n        }\n    }\n\n    let preferredRainbowChances = [0,0,0,0,0];\n    for (let i = 0; i < 5; i++) {\n        if (i != weights.type) {\n            if(cardsPerType[i].length > 0) {\n                let minimum = 1;\n                if (weights.prioritize) {\n                    minimum = 2;\n                }\n                let combos = GetCombinations(cardsPerType[i], minimum);\n                if (combos.length > 0) {\n                    preferredRainbowChances[i] = combos.reduce((current, combo) => {\n                        return current += CalculateCombinationChance(combo, undefined, i);\n                    }, 0);\n                }\n            }\n        }\n    }\n    \n    let chanceOfPreferredRainbow = 1 - preferredRainbowChances.reduce((current, chance) => {\n        return current * (1 - chance);\n    }, 1);\n    \n    for (let i = 0; i < cards.length; i++) {\n        let info = {};\n        let card = JSON.parse(JSON.stringify(cards[i]));\n        let cardType = card.type;\n        card.index = 6;\n        let bondNeeded = baseBondNeeded;\n        if (cardType == 6) {\n            bondNeeded += 55 - card.sb\n        } else {\n            bondNeeded += 75 - card.sb\n        }\n        let presentTypesWithCard = presentTypes.slice();\n        presentTypesWithCard[cardType] = true;\n\n        let typeCount = presentTypesWithCard.filter(Boolean).length;\n\n        // Add starting stats and stats from events\n        let score = card.sb;\n        let energyGain = 0;\n        let statGains = card.starting_stats.slice();\n        statGains.push(0);\n        \n        info.starting_stats = card.starting_stats.slice();\n        info.event_stats = [0,0,0,0,0,0,0];\n        \n        if (events[card.id]) {\n            info.event_stats = events[card.id].slice();\n            for (let stat = 0; stat < 6; stat++) {\n                statGains[stat] += events[card.id][stat] * card.effect_size_up;\n                info.event_stats[stat] = events[card.id][stat] * card.effect_size_up;\n            }\n            energyGain += events[card.id][6] * card.energy_up;\n            bondNeeded -= events[card.id][7];\n            score += events[card.id][7];\n        } else {\n            // Dummy event values for cards we don't yet know the events for\n            if (card.rarity === 2) {\n                // 35 total\n                for (let stat = 0; stat < 5; stat++) {\n                    statGains[stat] += 7;\n                }\n                bondNeeded -= 5;\n            } else if (card.rarity === 3) {\n                // 45 total\n                for (let stat = 0; stat < 5; stat++) {\n                    statGains[stat] += 9;\n                }\n                bondNeeded -= 5;\n            }\n            score += 5;\n        }\n\n        if (card.type_stats > 0) {\n            statGains[card.type] += card.type_stats;\n            for (let sc = 0; sc < selectedCards.length; sc++) {\n                if(selectedCards[sc].type < 6) {\n                    statGains[selectedCards[sc].type] += card.type_stats;\n                } else {\n                    statGains[0] += card.type_stats / 5;\n                    statGains[1] += card.type_stats / 5;\n                    statGains[2] += card.type_stats / 5;\n                    statGains[3] += card.type_stats / 5;\n                    statGains[4] += card.type_stats / 5;\n                }\n            }\n        }\n        \n        let trainingDays = 65 - weights.races[0] - weights.races[1] - weights.races[2];\n        if(cardType === 6) trainingDays -= 5;\n        let daysToBond = bondNeeded / weights.bondPerDay;\n        let rainbowDays = trainingDays - daysToBond;\n        let specialty = (100 + card.specialty_rate + weights.bonusSpec) * card.unique_specialty * card.fs_specialty;\n        let specialtyPercent = specialty / (450 + specialty);\n        let otherPercent = 100 / (450 + specialty);\n        let offstatAppearanceDenominator = card.offstat_appearance_denominator;\n        let daysPerTraining = [0,0,0,0,0];\n        let bondedDaysPerTraining = [0,0,0,0,0];\n        let rainbowTraining = 0;\n        \n        let rainbowOverride = 1;\n        if (cardType != 6) {\n            let chanceOfSingleRainbow = 0;\n            let cardsOfThisType = cardsPerType[cardType].slice();\n            card.rainbowSpecialty = specialtyPercent;\n            card.offSpecialty = otherPercent;\n            cardsOfThisType.push(card);\n            for (let j = 0; j < cardsOfThisType.length; j++) {\n                console.log(cardsOfThisType);\n                chanceOfSingleRainbow += CalculateCombinationChance([cardsOfThisType[j]], cardsOfThisType, cardType);\n            }\n            rainbowOverride = 1 - (chanceOfPreferredRainbow * chanceOfSingleRainbow);\n        }\n        \n        // Calculate appearance rates on each training\n        for (let stat = 0; stat < 5; stat++) {\n            if (stat == cardType) {\n                rainbowTraining = specialtyPercent * rainbowDays * rainbowOverride;\n                daysPerTraining[stat] = specialtyPercent * daysToBond;\n            } else {\n                daysPerTraining[stat] = otherPercent / offstatAppearanceDenominator * daysToBond;\n                bondedDaysPerTraining[stat] = otherPercent / offstatAppearanceDenominator * rainbowDays;\n            }\n        }\n\n        if (weights.onlySummer) {\n            rainbowTraining = 8 * specialtyPercent * rainbowOverride;\n        }\n\n        if (card.fs_ramp[0] > 0) {\n            let current_bonus = 0;\n            let total = 0;\n            for (let j = rainbowTraining * 0.66; j > 0; j--) {\n                total += current_bonus;\n                current_bonus = Math.min(current_bonus + card.fs_ramp[0], card.fs_ramp[1]);\n            }\n            card.unique_fs_bonus = 1 + total / rainbowTraining / 100;\n        }\n\n        // Stats from cross-training\n        info.non_rainbow_gains = [0,0,0,0,0,0,0];\n        for (let training = 0; training < 5; training ++) {\n            let gains = weights.unbondedTrainingGain[training];\n            let daysOnThisTraining = daysPerTraining[training];\n            energyGain += daysOnThisTraining * gains[6] * card.energy_discount;\n\n            let trainingGains = CalculateCrossTrainingGain(gains, weights, card, selectedCards, training, daysOnThisTraining, typeCount, false);\n            \n            for (let stat = 0; stat < 6; stat ++) {\n                statGains[stat] += trainingGains[stat];\n                info.non_rainbow_gains[stat] += trainingGains[stat];\n            }\n            info.non_rainbow_gains[6] += (daysOnThisTraining * gains[6] * card.energy_discount);\n        }\n\n        // Stats from cross-training while bonded\n        for (let training = 0; training < 5; training ++) {\n            let gains = weights.bondedTrainingGain[training];\n            let daysOnThisTraining = bondedDaysPerTraining[training];\n            energyGain += daysOnThisTraining * gains[6] * card.energy_discount;\n            energyGain += daysOnThisTraining * gains[6] * card.fs_energy;\n\n            let trainingGains = CalculateCrossTrainingGain(gains, weights, card, selectedCards, training, daysOnThisTraining, typeCount, true);\n            \n            for (let stat = 0; stat < 6; stat ++) {\n                statGains[stat] += trainingGains[stat];\n                info.non_rainbow_gains[stat] += trainingGains[stat];\n            }\n\n            info.non_rainbow_gains[6] += (daysOnThisTraining * gains[6] * card.energy_discount);\n            info.non_rainbow_gains[6] += (daysOnThisTraining * gains[6] * card.fs_energy);\n\n            if (training == 4 && card.group) {\n                energyGain += daysOnThisTraining * card.wisdom_recovery / 5;\n            }\n        }\n\n        info.rainbow_gains = [0,0,0,0,0,0,0];\n\n        // Stats from rainbows\n        if (cardType < 6) {\n            energyGain += rainbowTraining * card.wisdom_recovery;\n            let specialtyGains = weights.bondedTrainingGain[cardType];\n            if (weights.onlySummer) {\n                specialtyGains = weights.summerTrainingGain[cardType];\n            }\n            let trainingGains = CalculateTrainingGain(specialtyGains, weights, card, selectedCards, cardType, rainbowTraining, true, typeCount);\n\n            info.rainbow_gains = trainingGains.slice();\n            info.rainbow_gains.push(rainbowTraining * card.wisdom_recovery);\n\n            for (let stat = 0; stat < 6; stat ++) {\n                statGains[stat] += trainingGains[stat];\n            }\n        }\n\n        info.race_bonus_gains = 0;\n\n        // Race bonus\n        for (let raceType = 0; raceType < 4; raceType++) {\n            for (let stat = 0; stat < 6; stat ++) {\n                statGains[stat] += raceRewards[raceType][stat] * (card.race_bonus / 100) * weights.races[raceType];\n                info.race_bonus_gains += raceRewards[raceType][stat] * (card.race_bonus / 100) * weights.races[raceType];\n            }\n        }\n\n        // Convert stat gains to score\n        score += GainsToScore(statGains, weights);\n        score += energyGain * weights.stats[6];\n\n        if(weights.scenarioLink.indexOf(card.char_name) > -1) {\n            score += weights.scenarioBonus;\n        }\n\n        processedCards.push({\n            id: card.id,\n            lb: card.limit_break,\n            score: score,\n            info: info,\n            char_name: card.char_name\n        })\n    }\n\n    processedCards.sort((a, b) => b.score - a.score);\n    return processedCards;\n}\n\nfunction CalculateTrainingGain(gains, weights, card, otherCards, trainingType, days, rainbow, typeCount) {\n    let trainingGains = [0,0,0,0,0,0,0];\n\n    let trainingBonus = card.tb + card.fan_bonus * weights.fanBonus;\n    if (typeCount >= card.highlander_threshold) trainingBonus += card.highlander_training;\n    let fsBonus = 1;\n    let motivationBonus = card.mb;\n    if (rainbow) {\n        fsBonus = card.fs_bonus * card.unique_fs_bonus;\n        motivationBonus += card.fs_motivation;\n        trainingBonus += card.fs_training;\n    }\n\n    let soloGain = [0,0,0,0,0,0];\n    for (let stat = 0; stat < 6; stat ++) {\n        if (gains[stat] === 0) continue;\n\n        let base = gains[stat] + card.stat_bonus[stat];\n        if (rainbow) {\n            base += card.fs_stats[stat];\n        }\n        soloGain[stat] += (base \n            * trainingBonus\n            * (1 + weights.motivation * motivationBonus)\n            * fsBonus\n            * 1.05\n            * weights.umaBonus[stat]\n            - gains[stat]);\n    }\n    if (GainsToScore(soloGain, weights) > weights.minimum) {\n        for (let stat = 0; stat < 6; stat ++) {\n            trainingGains[stat] += soloGain[stat]\n                * days\n                * CalculateCombinationChance([], otherCards, trainingType)\n                * (rainbow ? weights.multi : 1);\n        }\n    }\n    \n    if (otherCards.length == 0) return trainingGains;\n\n    const combinations = GetCombinations(otherCards);\n\n    for (let i = 0; i < combinations.length; i++) {\n        let fullCombinationGains = [0,0,0,0,0,0];\n        let fullTotalGains = [0,0,0,0,0,0];\n        trainingBonus += (combinations[i].length + 1) * card.crowd_bonus;\n\n        const combinationTrainingBonus = combinations[i].reduce((current, c) => {\n            let training = current + (c.tb - 1) + (combinations[i].length * c.crowd_bonus);\n            if (typeCount >= c.highlander_threshold)\n                training += c.highlander_training;\n            return training;\n        }, 1);\n        const combinationFriendshipBonus = combinations[i].reduce((current, c) => {\n            if (c.cardType === trainingType) {\n                return current * c.fs_bonus * c.unique_fs_bonus;\n            } else {\n                return current;\n            }\n        }, 1);\n        const combinationMotivationBonus = combinations[i].reduce((current, c) => current + c.mb - 1, 1);\n        \n        for (let stat = 0; stat < 6; stat ++) {\n            if (gains[stat] === 0) continue;\n            \n            const combinationStatBonus = combinations[i].reduce((current, c) => current + c.stat_bonus[stat], 0);\n            let base = gains[stat] + combinationStatBonus;\n            if (rainbow) {\n                base += card.fs_stats[stat];\n            }\n\n            let combinationGains = (base \n                * combinationTrainingBonus\n                * (1 + weights.motivation * combinationMotivationBonus)\n                * combinationFriendshipBonus\n                * (1.05 * combinations[i].length)\n                * weights.umaBonus[stat]);\n                \n            let totalGains = ((base + card.stat_bonus[stat])\n                * (combinationTrainingBonus + trainingBonus - 1)\n                * (1 + weights.motivation * (combinationMotivationBonus + motivationBonus - 1))\n                * (combinationFriendshipBonus * fsBonus)\n                * (1.05 * (combinations[i].length + 1))\n                * weights.umaBonus[stat]);\n            \n            fullCombinationGains[stat] += combinationGains;\n            fullTotalGains[stat] += totalGains;\n        }\n        trainingBonus -= (combinations[i].length + 1) * card.crowd_bonus;\n        if (GainsToScore(fullTotalGains, weights) > weights.minimum) {\n            for (let stat = 0; stat < 6; stat ++) {\n                trainingGains[stat] += (fullTotalGains[stat] - fullCombinationGains[stat]) \n                    * days\n                    * CalculateCombinationChance(combinations[i], otherCards, trainingType)\n                    * (rainbow ? weights.multi : 1);\n            }\n        }\n    }\n\n    return trainingGains;\n}\n\nfunction CalculateCrossTrainingGain(gains, weights, card, otherCards, trainingType, days, typeCount, bonded) {\n    let trainingGains = [0,0,0,0,0,0,0];\n    let statCards = otherCards.filter((c) => c.cardType === trainingType);\n    let trainingBonus = card.tb + card.fan_bonus * weights.fanBonus;\n    if (typeCount >= card.highlander_threshold) trainingBonus += card.highlander_training;\n    let fsBonus = 1;\n    if (card.group && bonded) {\n        fsBonus += (card.fs_bonus + card.unique_fs_bonus - 1) / 5;\n    }\n    const combinations = GetCombinations(otherCards);\n\n    for (let i = 0; i < combinations.length; i++) {\n        const combination = combinations[i];\n        let fullCombinationGains = [0,0,0,0,0,0];\n        let fullTotalGains = [0,0,0,0,0,0];\n        trainingBonus += (combination.length + 1) * card.crowd_bonus;\n\n        const combinationTrainingBonus = combination.reduce((current, c) => {\n            let training = current + (c.tb - 1) + (combination.length * c.crowd_bonus);\n            if (typeCount >= c.highlander_threshold)\n                training += c.highlander_training;\n            return training;\n        }, 1);\n        const combinationFriendshipBonus = combination.reduce((current, c) => {\n            if (c.cardType === trainingType) {\n                return current * c.fs_bonus * c.unique_fs_bonus;\n            } else {\n                return current;\n            }\n        }, 1);\n        const combinationMotivationBonus = combination.reduce((current, c) => current + c.mb - 1, 1);\n        \n        for (let stat = 0; stat < 6; stat ++) {\n            if (gains[stat] === 0) continue;\n            if(!combination.some((r) => statCards.indexOf(r) > -1)) continue;\n            \n            const combinationStatBonus = combination.reduce((current, c) => current + c.stat_bonus[stat], 0);\n            const base = gains[stat] + combinationStatBonus;\n\n            let combinationGains = (base \n                * combinationTrainingBonus\n                * (1 + weights.motivation * combinationMotivationBonus)\n                * combinationFriendshipBonus\n                * (1.05 * combination.length)\n                * weights.umaBonus[stat]);\n            \n            let totalGains = 0;\n            if (bonded) {\n                totalGains = ((base + card.stat_bonus[stat] + card.fs_stats[stat])\n                    * (combinationTrainingBonus + trainingBonus + card.fs_training - 1)\n                    * (1 + weights.motivation * (combinationMotivationBonus + card.mb + card.fs_motivation - 1))\n                    * (combinationFriendshipBonus * fsBonus)\n                    * (1.05 * (combination.length + 1))\n                    * weights.umaBonus[stat]);\n            } else {\n                totalGains = ((base + card.stat_bonus[stat])\n                    * (combinationTrainingBonus + trainingBonus - 1)\n                    * (1 + weights.motivation * (combinationMotivationBonus + card.mb - 1))\n                    * (1.05 * (combination.length + 1))\n                    * weights.umaBonus[stat]);\n            }\n            \n            fullCombinationGains[stat] += combinationGains;\n            fullTotalGains[stat] += totalGains;\n        }\n        trainingBonus -= (combination.length + 1) * card.crowd_bonus;\n        if (GainsToScore(fullTotalGains, weights) > weights.minimum) {\n            for (let stat = 0; stat < 6; stat ++) {\n                trainingGains[stat] += (fullTotalGains[stat] - fullCombinationGains[stat]) \n                    * days\n                    * CalculateCombinationChance(combinations[i], otherCards, trainingType)\n                    * weights.multi;\n            }\n        }\n    }\n\n    return trainingGains;\n}\n\nfunction GainsToScore(gains, weights) {\n    let score = 0;\n    for (let stat = 0; stat < 6; stat ++) {\n        score += Math.min(gains[stat], weights.cap) * weights.stats[stat];\n    }\n    return score;\n}\n\nfunction GetCombinations(cards, minLength = 1) {\n    let combinations = [];\n    let temp = [];\n    const count = Math.pow(2, cards.length);\n\n    for (let i = 0; i < count; i++){\n        temp = [];\n        for (let j = 0; j<cards.length; j++) {\n            if (i & Math.pow(2,j)) { \n                temp.push(cards[j]);\n            }\n        }\n        if (temp.length >= minLength) {\n            combinations.push(temp);\n        }\n    }\n\n    return combinations;\n}\n\nfunction CalculateCombinationChance(combination, cards, trainingType) {\n    let chance = combination.reduce((current, card) => {\n        if (card.cardType === trainingType) {\n            return current * card.rainbowSpecialty;\n        } else {\n            return current * card.offSpecialty;\n        }\n    }, 1);\n    \n    if (cards) {\n        const otherCards = cards.filter((c) => combination.findIndex((d) => c.index == d.index) === -1);\n        chance = otherCards.reduce((current, card) => {\n            if (card.cardType === trainingType) {\n                return current * (1 - card.rainbowSpecialty);\n            } else {\n                return current * (1 - card.offSpecialty);\n            }\n        }, chance);\n    }\n\n    return chance;\n}\n\nexport default TierList;\n"]},"metadata":{},"sourceType":"module"}